#
# @configure_input@
#

VPATH = @srcdir@
srcdir = @srcdir@
top_srcdir = @top_srcdir@
prefix = @prefix@
exec_prefix = @exec_prefix@
libdir = @libdir@
mandir = @mandir@
datarootdir = @datarootdir@

# Shell commands.

CC	= @CC@
RANLIB  = @RANLIB@
INSTALL = @INSTALL@
AR      = ar r
RM	= rm -f

SASR	= -DSASR
######### Define SASR if >> is a signed arithmetic shift (-1 >> 1 == -1)

MULHACK = -DUSE_FLOAT_MUL
######### Define this if your host multiplies floats faster than integers,
######### e.g. on a SPARCstation.

# Build macros.

CFLAGS	= @CFLAGS@ @DEFS@ $(SASR) $(MULHAC) -I$(top_srcdir)/gsm
LDFLAGS	= @LDFLAGS@
LIBS	= @LIBS@

# Objects.

GSM_OBJECTS =	add.o		\
		code.o		\
		decode.o	\
		long_term.o     \
		lpc.o		\
		preprocess.o	\
		rpe.o		\
		gsm_destroy.o	\
		gsm_decode.o	\
		gsm_encode.o	\
		gsm_create.o	\
		gsm_option.o    \
		short_term.o    \
		table.o


LIBOBJS = $(GSM_OBJECTS)

all: libgsm.a

libgsm.a: $(LIBOBJS)
	$(AR) libgsm.a $(LIBOBJS)
	$(RANLIB) libgsm.a

install-lib: libgsm.a
	$(top_srcdir)/mkinstalldirs $(libdir)
	$(top_srcdir)/mkinstalldirs $(mandir)/man3
	$(INSTALL) -c -m 644 libgsm.a $(libdir)
	$(RANLIB) $(libdir)/libgsm.a
	$(INSTALL) -c -m 644 gsm.3 $(mandir)/man3
	$(INSTALL) -c -m 644 gsm_option.3 $(mandir)/man3

uninstall-lib:
	$(RM) $(libdir)/libgsm.a
	$(RM) $(mandir)/man3/gsm.3
	$(RM) $(mandir)/man3/gsm_option.3

clean:
	$(RM) *.o libgsm.a

distclean:
	$(RM) *~ *.o core libgsm.a
	$(RM) Makefile
